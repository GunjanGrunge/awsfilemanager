version: 1
frontend:
  phases:
    preBuild:
      commands:
        - npm install
    build:
      commands:
        - export AWS_REGION=${AWS_REGION}
        - export AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
        - export AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
        - export AWS_BUCKET_NAME=${AWS_BUCKET_NAME}
        - export FIREBASE_API_KEY=${FIREBASE_API_KEY}
        - export FIREBASE_AUTH_DOMAIN=${FIREBASE_AUTH_DOMAIN}
        - export FIREBASE_PROJECT_ID=${FIREBASE_PROJECT_ID}
        - export FIREBASE_STORAGE_BUCKET=${FIREBASE_STORAGE_BUCKET}
        - export FIREBASE_MESSAGING_SENDER_ID=${FIREBASE_MESSAGING_SENDER_ID}
        - export FIREBASE_APP_ID=${FIREBASE_APP_ID}
        - npm run build
  artifacts:
    baseDirectory: dist
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*